<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: lib/UserRequest.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: lib/UserRequest.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>var randomstring = require('randomstring');

module.exports = function (body) {
    return new UserRequest(body);
}

/**
* Stores information about a user's request and the address information of their core/hmi
* @constructor
* @param {object} body - An object of the user's request and other information
* @param {string} body.id - The id associated with a user
* @param {array} body.build - An array of objects that modify the CMakeLists.txt file
* @param {object} body.branch - An object which determines which branches to use for core/hmi
* @param {string} body.branch.hmi - The HMI branch to use
* @param {string} body.branch.core - The sdl_core branch to use
* @param {string} body.hmiName - Specifies which implementation of the HMI to use
* @param {string} body.userToHmiPrefix - Generated by Manticore that identifies where the HMI is
* @param {string} body.hmiToCorePrefix - ???
* @param {number} body.tcpPortExternal - Generated by Manticore that identifies the port of how to route to sdl_core
* @param {string} body.brokerAddressPrefix - Generated by Manticore that identifies where the broker is
* @param {number} body.tcpPortInternal - The actual port of sdl_core 
* @param {number} body.brokerPortInternal - The actual port of sdl_broker. 
* @param {number} body.hmiAddressInternal - The actual address of sdl_core
*/
//put the information from the request endpoint into this
function UserRequest (body) {
	if (body === undefined) {
		body = {};
	}
	this.id = body.id;
	this.build = body.build;
	this.branch = body.branch;
	this.hmiName = body.hmiName;
	this.userToHmiPrefix = body.userToHmiPrefix;
	this.hmiToCorePrefix = body.hmiToCorePrefix;
	this.tcpPortExternal = body.tcpPortExternal;
	this.brokerAddressPrefix = body.brokerAddressPrefix;
	this.tcpPortInternal = body.tcpPortInternal;
	this.brokerPortInternal = body.brokerPortInternal;
	this.hmiAddressInternal = body.hmiAddressInternal;
}

/**
* Make a JSON object out of the information, and stringify it
* @returns {string} - Stringified JSON of this class instance
*/
UserRequest.prototype.getString = function () {
	return JSON.stringify({
		id: this.id,
		build: this.build,
		branch: this.branch,
		hmiName: this.hmiName,
		userToHmiPrefix: this.userToHmiPrefix,
		hmiToCorePrefix: this.hmiToCorePrefix,
		tcpPortExternal: this.tcpPortExternal,
		brokerAddressPrefix: this.brokerAddressPrefix,
		tcpPortInternal: this.tcpPortInternal,
		brokerPortInternal: this.brokerPortInternal,
		hmiAddressInternal: this.hmiAddressInternal
	});
}

/**
* Takes in stringified JSON and converts it to a valid UserRequest
* @returns {UserRequest} - A UserRequest
*/
UserRequest.prototype.parse = function (string) {
	return new UserRequest(JSON.parse(string));
}

//THESE FUNCTIONS ARE MEANT TO BE FOR TESTING PURPOSES ONLY

//make some dummy data that a user request would have before manipulating the request info
UserRequest.prototype.generateDataInitial = function () {
	var request = new UserRequest();
	request.id = randomstring.generate(10);
	request.build = randomstring.generate(10)
	request.branch = randomstring.generate(10);
	request.hmiName = randomstring.generate(10);
	request.userToHmiPrefix = randomstring.generate(10);
	request.hmiToCorePrefix = randomstring.generate(10);
	request.tcpPortExternal = randomstring.generate(10);
	request.brokerAddressPrefix = randomstring.generate(10);
	request.tcpPortInternal = undefined;
	request.brokerPortInternal = undefined;
	return request;
}

//make some dummy data that a core service would have
UserRequest.prototype.generateDataCore = function () {
	var request = new UserRequest();
	request.id = randomstring.generate(10);
	request.build = randomstring.generate(10)
	request.branch = randomstring.generate(10);
	request.hmiName = randomstring.generate(10);
	request.userToHmiPrefix = randomstring.generate(10);
	request.hmiToCorePrefix = randomstring.generate(10);
	request.tcpPortExternal = randomstring.generate(10);
	request.brokerAddressPrefix = randomstring.generate(10);
	request.tcpPortInternal = randomstring.generate(10); //specific to core
	request.brokerPortInternal = undefined;
	return request;
}

//make some dummy data that an hmi service would have
UserRequest.prototype.generateDataHmi = function () {
	var request = new UserRequest();
	request.id = randomstring.generate(10);
	request.build = randomstring.generate(10);
	request.branch = randomstring.generate(10);
	request.hmiName = randomstring.generate(10);
	request.userToHmiPrefix = randomstring.generate(10);
	request.hmiToCorePrefix = randomstring.generate(10);
	request.tcpPortExternal = randomstring.generate(10);
	request.brokerAddressPrefix = randomstring.generate(10);
	request.tcpPortInternal = undefined;
	request.brokerPortInternal = randomstring.generate(10); //specific to hmi
	return request;
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-app_controller.html">app/controller</a></li><li><a href="module-app_controller-logic.html">app/controller-logic</a></li><li><a href="module-app_requestCore_core.html">app/requestCore/core</a></li><li><a href="module-app_requestCore_shell.html">app/requestCore/shell</a></li><li><a href="module-app_requestLogs_core.html">app/requestLogs/core</a></li><li><a href="module-app_requestLogs_shell.html">app/requestLogs/shell</a></li><li><a href="module-app_watches_core.html">app/watches/core</a></li><li><a href="module-app_watches_job_core.html">app/watches/job/core</a></li><li><a href="module-app_watches_job_shell.html">app/watches/job/shell</a></li><li><a href="module-app_watches_proxy_shell.html">app/watches/proxy/shell</a></li><li><a href="module-app_watches_shell.html">app/watches/shell</a></li></ul><h3>Classes</h3><ul><li><a href="AllocationData.html">AllocationData</a></li><li><a href="AwsHandler.html">AwsHandler</a></li><li><a href="ConnectionSocket.html">ConnectionSocket</a></li><li><a href="Context.html">Context</a></li><li><a href="HAProxyTemplate.html">HAProxyTemplate</a></li><li><a href="Listener.html">Listener</a></li><li><a href="SocketHandler.html">SocketHandler</a></li><li><a href="UserRequest.html">UserRequest</a></li><li><a href="WaitingList.html">WaitingList</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Wed Mar 08 2017 10:04:35 GMT-0500 (EST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
